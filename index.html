<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DANCEVERSE — Black & Gold Future Cypher Marketplace</title>
  <meta name="description" content="A futuristic Black-and-Gold dance marketplace. Sell premium dance videos ($50–$80) and onboard creators." />
  <meta name="theme-color" content="#05050a" />

  <style>
    :root{
      --bg0:#05050a;
      --bg1:#0a0810;

      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.04);
      --stroke: rgba(255,255,255,.14);

      --text: rgba(245,245,255,.92);
      --muted: rgba(245,245,255,.68);

      --gold:#d7b85a;
      --gold2:#f5d36b;

      --violet: rgba(168,85,247,.95);
      --blue: rgba(59,130,246,.95);

      --shadow: 0 26px 80px rgba(0,0,0,.55);
      --radius: 18px;

      --grid: 42px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font: 14px/1.35 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(168,85,247,.14), transparent 60%),
        radial-gradient(900px 700px at 80% 20%, rgba(215,184,90,.12), transparent 58%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    button, input, textarea{font:inherit}

    .page{min-height:100vh}
    .matinee{
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(168,85,247,.10), transparent 60%),
        radial-gradient(900px 700px at 80% 20%, rgba(215,184,90,.10), transparent 58%),
        linear-gradient(180deg, #07060c, #0b0812);
    }

    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:30;
      display:flex; align-items:center; justify-content:space-between;
      padding: 16px 18px;
      background: rgba(5,5,10,.62);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .brand{display:flex; gap:12px; align-items:center;}
    .mark{
      width:14px;height:14px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, var(--gold2), var(--gold));
      box-shadow: 0 0 0 6px rgba(215,184,90,.16), 0 0 40px rgba(215,184,90,.24);
    }
    .brandText .name{
      font-weight:900; letter-spacing:.18em; font-size:12px;
    }
    .brandText .tag{
      color:var(--muted); font-size:12px; margin-top:2px;
    }
    .nav{display:flex; gap:14px; align-items:center;}
    .link{color:var(--muted); font-weight:650;}
    .link:hover{color:var(--text);}
    .pill{
      border:1px solid rgba(215,184,90,.35);
      background: linear-gradient(180deg, rgba(215,184,90,.18), rgba(255,255,255,.05));
      padding:10px 12px; border-radius:999px;
      cursor:pointer; color:var(--text); font-weight:800;
      transition: transform .12s ease, border-color .12s ease;
    }
    .pill:hover{border-color:rgba(215,184,90,.6); transform:translateY(-1px);}

    /* Hero */
    .hero{
      position:relative;
      height: 580px;
      overflow:hidden;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    canvas#theatre{
      position:absolute; inset:0;
      width:100%; height:100%;
    }
    .heroInner{
      position:relative; z-index:2;
      max-width: 1200px; margin:0 auto;
      padding: 26px 18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 22px;
      height:100%;
    }

    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.12);
      width:fit-content;
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    }
    .pulse{
      width:10px;height:10px;border-radius:999px;
      background: var(--gold2);
      box-shadow: 0 0 0 6px rgba(215,184,90,.18);
      animation: pulse 1.8s infinite ease-in-out;
    }
    @keyframes pulse{
      0%{transform:scale(1); opacity:.95}
      50%{transform:scale(1.18); opacity:.7}
      100%{transform:scale(1); opacity:.95}
    }

    .headline{
      margin: 16px 0 10px;
      font-size: 44px;
      line-height:1.05;
      letter-spacing:-.03em;
    }
    .gold{color:var(--gold2); text-shadow: 0 0 34px rgba(245,211,107,.22);}
    .sub{
      margin:0;
      color: rgba(245,245,255,.75);
      max-width: 640px;
      font-size: 15px;
    }
    .ctaRow{
      margin-top:16px;
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .cta{
      display:inline-flex; align-items:center; justify-content:center;
      padding:12px 14px;
      border-radius:14px;
      font-weight:900;
      cursor:pointer;
      border:1px solid transparent;
      transition: transform .12s ease, border-color .12s ease;
      user-select:none;
    }
    .cta.primary{
      background: linear-gradient(180deg, rgba(245,211,107,.26), rgba(215,184,90,.14));
      border-color: rgba(215,184,90,.55);
    }
    .cta.ghost{
      background: rgba(255,255,255,.05);
      border-color: rgba(255,255,255,.14);
      color: rgba(245,245,255,.9);
    }
    .cta:hover{transform:translateY(-1px);}

    .typeRow{
      margin-top:14px;
      display:flex; gap:10px; align-items:baseline;
      color: rgba(245,245,255,.72);
    }
    .typeLabel{
      color: rgba(245,211,107,.9);
      font-weight:950;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:11px;
    }
    .typeText{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:13px;
      min-height: 18px;
    }

    .controls{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      max-width: 640px;
    }
    .controlCard{
      background: var(--panel);
      border:1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      padding:14px;
      box-shadow: var(--shadow);
    }
    .controlHead{
      display:flex; justify-content:space-between; align-items:center;
      margin-bottom:10px;
    }
    .controlTitle{
      font-weight:950;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:11px;
      color: rgba(245,245,255,.86);
    }
    .coords{
      color: rgba(245,245,255,.65);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:12px;
    }
    .row{
      display:grid;
      grid-template-columns: 80px 1fr;
      gap: 12px;
      align-items:center;
      margin: 10px 0;
    }
    .label{color: rgba(245,245,255,.7); font-weight:800;}
    .seg{display:inline-flex; gap:8px; flex-wrap:wrap;}
    .segBtn{
      padding:9px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(245,245,255,.82);
      cursor:pointer;
      font-weight:900;
      font-size: 12px;
    }
    .segBtn.on{
      border-color: rgba(215,184,90,.65);
      background: linear-gradient(180deg, rgba(215,184,90,.18), rgba(255,255,255,.04));
      color: rgba(245,245,255,.92);
    }
    .slider{width:100%; accent-color: var(--gold2);}

    .proof{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    .proofCard{
      background: var(--panel2);
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      padding:12px;
    }
    .proofNum{font-weight:950; font-size:14px; letter-spacing:.06em;}
    .proofTxt{color: rgba(245,245,255,.66); font-size:12px; margin-top:4px;}

    /* Hero Right (featured) */
    .heroRight{display:flex; align-items:center; justify-content:center;}
    .stage{width:100%; max-width: 380px; position:relative;}
    .curtain{
      position:absolute; inset:-40px;
      background:
        radial-gradient(700px 400px at 50% 0%, rgba(215,184,90,.18), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.15));
      border-radius: 28px;
      transform: translateY(-10px);
      animation: curtainReveal 1.4s ease forwards;
      opacity:.92;
    }
    @keyframes curtainReveal{
      0%{transform:translateY(-22px); opacity:.10}
      100%{transform:translateY(0px); opacity:.92}
    }
    .stageCard{
      position:relative;
      background: rgba(0,0,0,.44);
      border:1px solid rgba(255,255,255,.12);
      border-radius: 22px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .stageTop{
      display:flex; justify-content:space-between; align-items:center;
      padding: 14px 14px 10px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .stageTitle{
      font-weight:950; letter-spacing:.08em; text-transform:uppercase;
      font-size:11px; color: rgba(245,245,255,.86);
    }
    .stageChip{
      font-weight:950; font-size:11px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(215,184,90,.38);
      background: rgba(215,184,90,.12);
    }
    .stageBody{padding:14px; display:grid; gap:12px;}
    .mockVideo{
      position:relative;
      height:200px;
      border-radius:18px;
      background:
        radial-gradient(400px 240px at 40% 35%, rgba(168,85,247,.22), transparent 60%),
        radial-gradient(420px 260px at 70% 45%, rgba(245,211,107,.18), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.25));
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
    }
    .scanline{
      position:absolute; inset:0;
      background: repeating-linear-gradient(
        180deg,
        rgba(255,255,255,.04) 0px,
        rgba(255,255,255,.04) 1px,
        rgba(0,0,0,0) 8px,
        rgba(0,0,0,0) 12px
      );
      mix-blend-mode: overlay;
      opacity:.25;
    }
    .glowRing{
      position:absolute;
      width:260px;height:260px;border-radius:999px;
      left:50%; top:50%;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle at 50% 50%, rgba(245,211,107,.12), rgba(0,0,0,0));
      border:1px solid rgba(245,211,107,.18);
      box-shadow: 0 0 80px rgba(245,211,107,.18);
    }
    .mockText{position:absolute; left:16px; bottom:14px;}
    .mockText .t1{font-weight:950; letter-spacing:.14em; font-size:12px;}
    .mockText .t2{color: rgba(245,245,255,.72); margin-top:6px; font-size:12px;}

    .stageBottom{
      display:flex; justify-content:space-between; align-items:center;
      padding: 12px 14px;
      border-top:1px solid rgba(255,255,255,.08);
    }
    .miniLink{color: rgba(245,211,107,.92); font-weight:950;}
    .miniNote{color: rgba(245,245,255,.65); font-size:12px;}

    /* Sections */
    .section{
      max-width: 1200px; margin:0 auto;
      padding: 40px 18px;
    }
    .section.alt{
      border-top:1px solid rgba(255,255,255,.08);
      border-bottom:1px solid rgba(255,255,255,.08);
      background:
        radial-gradient(900px 600px at 20% 20%, rgba(215,184,90,.07), transparent 60%),
        radial-gradient(900px 600px at 70% 40%, rgba(168,85,247,.06), transparent 62%);
    }
    .sectionHead h2{
      margin:0;
      font-size:26px;
      letter-spacing:-.02em;
    }
    .sectionHead p{
      margin:10px 0 0;
      color: rgba(245,245,255,.72);
      max-width:760px;
    }

    .filters{
      margin-top:18px;
      display:grid;
      gap:12px;
    }
    .filter{
      background: var(--panel2);
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      padding:12px;
    }
    .filterTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .filterLabel{
      font-weight:950;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:11px;
      color: rgba(245,245,255,.78);
    }
    .search{
      display:flex; gap:8px; align-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      border-radius: 999px;
      padding: 8px 10px;
      min-width: 260px;
    }
    .search input{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color: rgba(245,245,255,.9);
    }
    .chips{display:flex; flex-wrap:wrap; gap:8px;}
    .chip{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(245,245,255,.82);
      cursor:pointer;
      font-weight:900;
      font-size:12px;
      user-select:none;
    }
    .chip.on{
      border-color: rgba(215,184,90,.6);
      background: rgba(215,184,90,.14);
    }

    .grid{
      margin-top:16px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .card{
      background: rgba(0,0,0,.34);
      border:1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      padding:14px;
      box-shadow: 0 18px 70px rgba(0,0,0,.35);
    }
    .cardTop{
      display:flex; justify-content:space-between; align-items:center;
      gap:10px;
    }
    .kicker{
      font-weight:950;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:11px;
      color: rgba(245,211,107,.9);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .price{font-weight:950; font-size:14px;}
    .cardTitle{
      margin:10px 0 8px;
      font-size:16px;
      line-height:1.2;
      letter-spacing:-.01em;
    }
    .cardTagline{margin:0; color: rgba(245,245,255,.72);}
    .meta{
      display:flex; flex-wrap:wrap; gap:8px;
      margin-top:12px;
    }
    .pill2{
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(245,245,255,.82);
      font-weight:900;
      font-size:12px;
    }

    .cardActions{
      display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;
    }
    .btn{
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(215,184,90,.55);
      background: linear-gradient(180deg, rgba(245,211,107,.22), rgba(215,184,90,.10));
      cursor:pointer;
      color: rgba(245,245,255,.92);
      font-weight:950;
      transition: transform .12s ease;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px);}
    .btn.ghost2{
      border-color: rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
    }
    .fine{
      margin-top:10px;
      color: rgba(245,245,255,.58);
      font-size:12px;
    }

    .steps{
      margin-top:16px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .step{
      background: var(--panel2);
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      padding:14px;
    }
    .stepNum{
      font-weight:950;
      color: rgba(245,211,107,.9);
      letter-spacing:.16em;
    }
    .stepTitle{margin-top:8px; font-weight:950; font-size:14px;}
    .stepTxt{margin-top:8px; color: rgba(245,245,255,.72);}

    .creatorRow{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .creatorCard{
      background: rgba(0,0,0,.34);
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      padding:16px;
      box-shadow: 0 18px 70px rgba(0,0,0,.35);
    }
    .creatorCard.glow{
      border-color: rgba(215,184,90,.26);
      box-shadow: 0 18px 90px rgba(215,184,90,.08), 0 18px 70px rgba(0,0,0,.35);
    }
    .creatorCard h3{margin:0; font-size:18px;}
    .creatorCard p{margin:10px 0 0; color: rgba(245,245,255,.72);}
    .list{margin:12px 0 14px; color: rgba(245,245,255,.74);}
    .list li{margin:6px 0;}

    /* Footer */
    .footer{
      border-top:1px solid rgba(255,255,255,.08);
      padding:26px 18px;
      background: rgba(0,0,0,.25);
    }
    .footGrid{
      max-width:1200px; margin:0 auto;
      display:grid;
      grid-template-columns: 1.2fr .8fr 1fr;
      gap:12px;
    }
    .footTitle{
      font-weight:950;
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:11px;
      color: rgba(245,245,255,.82);
    }
    .footTxt{margin-top:10px; color: rgba(245,245,255,.68);}
    .footLink{display:block; margin-top:10px; color: rgba(245,245,255,.72); font-weight:850;}
    .footLink:hover{color: rgba(245,245,255,.92);}
    .footBottom{
      max-width:1200px; margin:18px auto 0;
      color: rgba(245,245,255,.55);
      font-size:12px;
    }

    /* Modal */
    .overlay{
      position:fixed; inset:0; z-index:100;
      background: rgba(0,0,0,.62);
      display:flex; align-items:center; justify-content:center;
      padding:18px;
    }
    .modal{
      width: min(760px, 96vw);
      background: rgba(10,8,16,.92);
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;
      box-shadow: 0 30px 120px rgba(0,0,0,.65);
      overflow:hidden;
    }
    .modalTop{
      display:flex; justify-content:space-between; align-items:center;
      padding:14px 14px 12px;
      border-bottom:1px solid rgba(255,255,255,.10);
      gap: 12px;
    }
    .modalTitle{font-weight:950; font-size:16px;}
    .modalSub{margin-top:6px; color: rgba(245,245,255,.70); font-size:12px;}
    .x{
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(245,245,255,.82);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      user-select:none;
    }
    .modalBody{padding:14px; display:grid; gap:10px;}
    .previewArt{
      position:relative;
      height: 240px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(600px 260px at 40% 40%, rgba(168,85,247,.22), transparent 60%),
        radial-gradient(600px 260px at 70% 40%, rgba(245,211,107,.18), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.25));
      overflow:hidden;
      display:flex; align-items:center; justify-content:center;
      padding: 14px;
    }
    .previewGlow{
      position:absolute; inset:-40px;
      background: radial-gradient(circle at 60% 40%, rgba(245,211,107,.12), transparent 60%);
      filter: blur(10px);
    }
    .previewText{
      position:relative;
      text-align:left;
      width:100%;
      max-width: 640px;
    }
    .pt1{
      font-weight:950; letter-spacing:.14em; font-size:12px;
    }
    .pt2{margin-top:8px; color: rgba(245,245,255,.72);}
    .embedWrap{
      width:100%;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.30);
    }
    .embedNote{
      color: rgba(245,245,255,.70);
      font-size: 12px;
      margin-top: 6px;
    }
    .modalActions{
      display:flex; gap:10px; flex-wrap:wrap;
      padding: 0 14px 14px;
      align-items:center;
    }
    .modalFine{
      padding: 0 14px 16px;
      color: rgba(245,245,255,.60);
      font-size: 12px;
    }

    /* Form */
    .form{display:grid; gap:10px;}
    .fRow{display:grid; gap:8px;}
    .fLabel{font-weight:900; color: rgba(245,245,255,.78);}
    .fInput,.fArea{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: rgba(245,245,255,.90);
      padding:10px 12px;
      outline:none;
    }
    .fArea{min-height: 90px; resize: vertical;}

    /* Toast */
    .toast{
      position: fixed;
      right: 14px;
      bottom: 14px;
      z-index: 200;
      background: rgba(0,0,0,.72);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      padding: 12px 12px;
      box-shadow: 0 26px 80px rgba(0,0,0,.55);
      max-width: 420px;
      display:none;
    }
    .toast.show{display:block;}
    .toastTitle{font-weight:950;}
    .toastBody{margin-top:6px; color: rgba(245,245,255,.72); font-size: 12px;}
    .toastRow{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;}
    .tinyBtn{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(215,184,90,.55);
      background: rgba(215,184,90,.12);
      cursor:pointer;
      color: rgba(245,245,255,.92);
      font-weight:950;
    }
    .tinyBtn.ghost{
      border-color: rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
    }

    /* Responsive */
    @media (max-width: 980px){
      .heroInner{grid-template-columns: 1fr; gap: 14px;}
      .heroRight{display:none;}
      .grid{grid-template-columns: 1fr;}
      .steps{grid-template-columns: 1fr;}
      .creatorRow{grid-template-columns: 1fr;}
      .proof{grid-template-columns: 1fr;}
      .headline{font-size: 38px;}
      .nav .link{display:none;}
      .search{min-width: 200px;}
    }
  </style>
</head>

<body>
  <div id="page" class="page night">
    <header class="topbar">
      <div class="brand">
        <span class="mark" aria-hidden="true"></span>
        <div class="brandText">
          <div class="name">DANCEVERSE</div>
          <div class="tag">Black & Gold • Future Cypher Marketplace</div>
        </div>
      </div>

      <nav class="nav">
        <a class="link" href="#market">Marketplace</a>
        <a class="link" href="#creators">Creators</a>
        <a class="link" href="#how">How it works</a>
        <button class="pill" id="teachBtn">Teach on Danceverse</button>
      </nav>
    </header>

    <section class="hero" id="top">
      <canvas id="theatre" aria-hidden="true"></canvas>

      <div class="heroInner" id="heroSurface">
        <div class="heroLeft">
          <div class="badge">
            <span class="pulse" aria-hidden="true"></span>
            New-Age Dance Platform • Built for the Minds of the Future
          </div>

          <h1 class="headline">
            Your movement is <span class="gold">intellectual property</span>.<br/>
            Sell it like it matters.
          </h1>

          <p class="sub">
            Premium dance lessons, breakdowns, and choreography drops — priced like mastery.
            Buy a video, own the moment. Or become a creator and earn from your style.
          </p>

          <div class="ctaRow">
            <a class="cta primary" href="#market">Enter the Marketplace</a>
            <button class="cta ghost" id="applyBtn">Apply as a Creator</button>
          </div>

          <div class="typeRow" aria-live="polite">
            <span class="typeLabel">Scene:</span>
            <span class="typeText" id="typeText"></span>
          </div>

          <div class="controls">
            <div class="controlCard">
              <div class="controlHead">
                <div class="controlTitle">Cypher Remix</div>
                <div class="coords" id="coords">Grid: 0,0</div>
              </div>

              <div class="row">
                <label class="label">Time</label>
                <div class="seg">
                  <button class="segBtn" data-time="Matinée" id="timeMatinee">Matinée</button>
                  <button class="segBtn on" data-time="Night" id="timeNight">Night</button>
                </div>
              </div>

              <div class="row">
                <label class="label">Vibe</label>
                <div class="seg">
                  <button class="segBtn on" data-vibe="Smooth">Smooth</button>
                  <button class="segBtn" data-vibe="Raw">Raw</button>
                  <button class="segBtn" data-vibe="Legendary">Legendary</button>
                </div>
              </div>

              <div class="row">
                <label class="label">Intensity</label>
                <input class="slider" id="intensity" type="range" min="0" max="1" step="0.01" value="0.62" />
              </div>
            </div>

            <div class="proof">
              <div class="proofCard">
                <div class="proofNum">50–80</div>
                <div class="proofTxt">Premium pricing per video</div>
              </div>
              <div class="proofCard">
                <div class="proofNum">All Styles</div>
                <div class="proofTxt">Hip-hop core, global rhythm</div>
              </div>
              <div class="proofCard">
                <div class="proofNum">Creator-First</div>
                <div class="proofTxt">Teach, sell, and build legacy</div>
              </div>
            </div>
          </div>
        </div>

        <div class="heroRight" aria-hidden="true">
          <div class="stage">
            <div class="curtain"></div>
            <div class="stageCard">
              <div class="stageTop">
                <div class="stageTitle">Featured Drop</div>
                <div class="stageChip" id="vibeChip">Smooth Mode</div>
              </div>
              <div class="stageBody">
                <div class="mockVideo">
                  <div class="scanline"></div>
                  <div class="glowRing"></div>
                  <div class="mockText">
                    <div class="t1">CYBER CYPHER</div>
                    <div class="t2">Gold Frequency • Motion Architecture</div>
                  </div>
                </div>
                <div style="display:grid; gap:8px;">
                  <div style="display:flex; justify-content:space-between; color: rgba(245,245,255,.72);">
                    <span>Drop Type</span><b style="color: rgba(245,245,255,.92);">Masterclass</b>
                  </div>
                  <div style="display:flex; justify-content:space-between; color: rgba(245,245,255,.72);">
                    <span>Access</span><b style="color: rgba(245,245,255,.92);">Instant after purchase</b>
                  </div>
                  <div style="display:flex; justify-content:space-between; color: rgba(245,245,255,.72);">
                    <span>Platform</span><b style="color: rgba(245,245,255,.92);">GitHub Pages MVP</b>
                  </div>
                </div>
              </div>
              <div class="stageBottom">
                <a class="miniLink" href="#market">Browse drops →</a>
                <span class="miniNote">Built to feel expensive.</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="market">
      <div class="sectionHead">
        <h2>Marketplace</h2>
        <p>Buy premium lessons, breakdowns, and choreography drops. You’re paying for clarity, not randomness.</p>
      </div>

      <div class="filters">
        <div class="filter">
          <div class="filterTop">
            <div class="filterLabel">Find the right drop</div>
            <div class="search" title="Search titles and tags">
              <span style="color: rgba(245,245,255,.55);">⌕</span>
              <input id="search" placeholder="Search (e.g., popping, afro, cypher)" />
            </div>
          </div>

          <div style="display:grid; gap:10px;">
            <div>
              <div class="filterLabel" style="margin-bottom:10px;">Style</div>
              <div class="chips" id="styleChips"></div>
            </div>
            <div>
              <div class="filterLabel" style="margin-bottom:10px;">Level</div>
              <div class="chips" id="levelChips"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="grid" id="productGrid"></div>
    </section>

    <section class="section alt" id="how">
      <div class="sectionHead">
        <h2>How it works</h2>
        <p>Designed to be simple for buyers and scalable for creators.</p>
      </div>

      <div class="steps">
        <div class="step">
          <div class="stepNum">01</div>
          <div class="stepTitle">Browse a drop</div>
          <div class="stepTxt">Pick a style, level, and price. Everything is presented like a premium product.</div>
        </div>
        <div class="step">
          <div class="stepNum">02</div>
          <div class="stepTitle">Pay instantly</div>
          <div class="stepTxt">Use Stripe Payment Links (fastest) or Gumroad/Payhip (best delivery + access).</div>
        </div>
        <div class="step">
          <div class="stepNum">03</div>
          <div class="stepTitle">Access + level up</div>
          <div class="stepTxt">MVP: redirect to success page. Phase 2: locked library + secure streaming.</div>
        </div>
      </div>
    </section>

    <section class="section" id="creators">
      <div class="sectionHead">
        <h2>Creators</h2>
        <p>This is a platform for dancers with real skill. Apply to teach, publish drops, and earn with your talent.</p>
      </div>

      <div class="creatorRow">
        <div class="creatorCard">
          <h3>Teach on Danceverse</h3>
          <p>We’re building a curated marketplace. Not noise. If you have mastery, we help you package it and sell it.</p>
          <ul class="list">
            <li>Hip-hop, Afro, contemporary, popping, krump, heels, ballroom, more</li>
            <li>Phase 2 payouts via Stripe Connect (creator-first monetization)</li>
            <li>Featured drops + cypher challenges for viral discovery</li>
          </ul>
          <button class="btn" id="applyBtn2">Apply as a Creator</button>
        </div>

        <div class="creatorCard glow">
          <h3>Weekly Cypher Challenges (Viral Engine)</h3>
          <p>The platform grows when the community competes and collaborates. Winners get featured placement.</p>
          <div style="margin-top:12px; background: rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); border-radius:16px; padding:12px;">
            <div style="color: rgba(245,245,255,.90);"><b>Challenge:</b> “Gold Frequency Groove”</div>
            <div style="margin-top:8px; color: rgba(245,245,255,.72);">
              Post your 20–40s clip. Tag your style. Upload your breakdown. The cypher votes.
            </div>
            <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
              <span class="pill2">Discovery</span>
              <span class="pill2">Community</span>
              <span class="pill2">Revenue</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footGrid">
        <div>
          <div class="footTitle">DANCEVERSE</div>
          <div class="footTxt">A futuristic Black-and-Gold dance marketplace built for premium skill and community growth.</div>
        </div>
        <div>
          <div class="footTitle">Site</div>
          <a class="footLink" href="#market">Marketplace</a>
          <a class="footLink" href="#creators">Creators</a>
          <a class="footLink" href="#how">How it works</a>
        </div>
        <div>
          <div class="footTitle">Policies</div>
          <div class="footTxt">Add: Content Rules • Copyright • Refunds • Privacy</div>
        </div>
      </div>
      <div class="footBottom">© <span id="year"></span> Danceverse. All rights reserved.</div>
    </footer>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">
    <div class="toastTitle" id="toastTitle">Notice</div>
    <div class="toastBody" id="toastBody"></div>
    <div class="toastRow">
      <button class="tinyBtn ghost" id="toastClose">Close</button>
    </div>
  </div>

  <!-- Modal Root -->
  <div id="modalRoot"></div>

  <script>
    /************************************************************
     * CONFIG — Replace these to monetize properly.
     ************************************************************/

    // 1) Replace BUY URLs with your Stripe Payment Links (or Gumroad/Payhip links).
    //    Stripe Payment Links look like: https://buy.stripe.com/xxxxxxxxxxxx
    // 2) Replace previewEmbed with your Vimeo/YouTube embed link (short trailer).
    // 3) For best delivery on a static site: use Gumroad/Payhip (auto delivery).
    const PRODUCTS = [
      {
        id: "cypher-foundations",
        title: "Cypher Foundations: Control, Bounce, Authority",
        creator: "Saint (Founder)",
        style: "Hip-Hop",
        level: "Beginner",
        durationMin: 48,
        price: 50,
        tagline: "Build the base that makes every move look expensive.",
        buyUrl: "REPLACE_WITH_STRIPE_PAYMENT_LINK_50",
        previewEmbed: "https://www.youtube.com/embed/dQw4w9WgXcQ"
      },
      {
        id: "afro-fusion-flow",
        title: "Afro Fusion Flow: Rhythm + Storytelling",
        creator: "Guest Creator",
        style: "Afro / Fusion",
        level: "Intermediate",
        durationMin: 62,
        price: 70,
        tagline: "Learn to move like the music is inside your chest.",
        buyUrl: "REPLACE_WITH_STRIPE_PAYMENT_LINK_70",
        previewEmbed: "https://www.youtube.com/embed/dQw4w9WgXcQ"
      },
      {
        id: "popping-precision",
        title: "Popping Precision: Hits, Angles, Clean Illusions",
        creator: "Guest Creator",
        style: "Popping",
        level: "Advanced",
        durationMin: 55,
        price: 80,
        tagline: "Turn sharp technique into a signature.",
        buyUrl: "REPLACE_WITH_STRIPE_PAYMENT_LINK_80",
        previewEmbed: "https://www.youtube.com/embed/dQw4w9WgXcQ"
      }
    ];

    // Creator application endpoint:
    // Option A (recommended for static): Formspree. Replace with your endpoint:
    // https://formspree.io/f/xxxxxx
    const CREATOR_FORM_ACTION = "REPLACE_WITH_FORMSPREE_ENDPOINT";

    /************************************************************
     * UI helpers
     ************************************************************/
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));
    const clamp = (n,a,b)=>Math.max(a,Math.min(b,n));
    const money = (n)=>`$${Number(n).toFixed(0)}`;

    $("#year").textContent = new Date().getFullYear();

    function showToast(title, body){
      $("#toastTitle").textContent = title;
      $("#toastBody").textContent = body;
      $("#toast").classList.add("show");
    }
    $("#toastClose").addEventListener("click", ()=> $("#toast").classList.remove("show"));

    /************************************************************
     * Typewriter subtitle (attention mechanic)
     ************************************************************/
    const LINES = [
      "The future isn’t coming. It’s already in the room.",
      "This is Black excellence, engineered for motion.",
      "Turn skill into legacy. Turn rhythm into revenue.",
      "Welcome to the cypher where the platform pays you back."
    ];
    let lineIndex = 0;
    let typing = false;

    async function typeLine(){
      if (typing) return;
      typing = true;
      const el = $("#typeText");
      const line = LINES[lineIndex % LINES.length];
      el.textContent = "";
      for (let i=1; i<=line.length; i++){
        el.textContent = line.slice(0,i);
        await new Promise(r=>setTimeout(r, 22));
      }
      await new Promise(r=>setTimeout(r, 1100));
      lineIndex++;
      typing = false;
      typeLine();
    }
    typeLine();

    /************************************************************
     * Filters + marketplace render
     ************************************************************/
    const state = {
      style: "All",
      level: "All",
      search: ""
    };

    const uniqueStyles = ["All", ...Array.from(new Set(PRODUCTS.map(p=>p.style)))];
    const uniqueLevels = ["All", "Beginner", "Intermediate", "Advanced"];

    function renderChips(containerId, options, activeValue, onPick){
      const root = $(containerId);
      root.innerHTML = "";
      options.forEach(opt=>{
        const b = document.createElement("button");
        b.className = "chip" + (opt === activeValue ? " on" : "");
        b.textContent = opt;
        b.addEventListener("click", ()=>onPick(opt));
        root.appendChild(b);
      });
    }

    function filteredProducts(){
      const q = state.search.trim().toLowerCase();
      return PRODUCTS.filter(p=>{
        const styleOk = state.style === "All" ? true : p.style === state.style;
        const levelOk = state.level === "All" ? true : p.level === state.level;
        const searchOk = !q ? true : (
          (p.title + " " + p.tagline + " " + p.style + " " + p.level + " " + p.creator).toLowerCase().includes(q)
        );
        return styleOk && levelOk && searchOk;
      });
    }

    function renderProducts(){
      const grid = $("#productGrid");
      const list = filteredProducts();

      if (!list.length){
        grid.innerHTML = `<div class="card" style="grid-column: 1 / -1;">
          <div class="cardTitle">No drops match your filters.</div>
          <p class="cardTagline">Try a different style/level or clear search.</p>
        </div>`;
        return;
      }

      grid.innerHTML = "";
      list.forEach(p=>{
        const card = document.createElement("article");
        card.className = "card";
        card.innerHTML = `
          <div class="cardTop">
            <div class="kicker">${escapeHtml(p.style)}</div>
            <div class="price">${money(p.price)}</div>
          </div>
          <h3 class="cardTitle">${escapeHtml(p.title)}</h3>
          <p class="cardTagline">${escapeHtml(p.tagline)}</p>
          <div class="meta">
            <div class="pill2">${escapeHtml(p.level)}</div>
            <div class="pill2">${p.durationMin} min</div>
            <div class="pill2">Creator: ${escapeHtml(p.creator)}</div>
          </div>
          <div class="cardActions">
            <button class="btn" data-preview="${p.id}">Preview + Buy</button>
            <button class="btn ghost2" data-save="${p.id}">Save</button>
          </div>
          <div class="fine">MVP delivery: checkout redirect. Phase 2: secure library + streaming.</div>
        `;
        grid.appendChild(card);
      });

      $$("[data-preview]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const id = btn.getAttribute("data-preview");
          const product = PRODUCTS.find(x=>x.id===id);
          if (product) openBuyModal(product);
        });
      });

      $$("[data-save]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          showToast("Saved (Phase 2)", "Next upgrade: create accounts + personal library so users can save drops and access purchased content securely.");
        });
      });
    }

    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    renderChips("#styleChips", uniqueStyles, state.style, (v)=>{ state.style=v; renderChips("#styleChips", uniqueStyles, state.style, arguments.callee); renderProducts(); });
    renderChips("#levelChips", uniqueLevels, state.level, (v)=>{ state.level=v; renderChips("#levelChips", uniqueLevels, state.level, arguments.callee); renderProducts(); });

    // Fix chips re-render by attaching stable handlers:
    function setStyle(v){ state.style=v; renderChips("#styleChips", uniqueStyles, state.style, setStyle); renderProducts(); }
    function setLevel(v){ state.level=v; renderChips("#levelChips", uniqueLevels, state.level, setLevel); renderProducts(); }
    renderChips("#styleChips", uniqueStyles, state.style, setStyle);
    renderChips("#levelChips", uniqueLevels, state.level, setLevel);

    $("#search").addEventListener("input", (e)=>{
      state.search = e.target.value;
      renderProducts();
    });

    renderProducts();

    /************************************************************
     * Buy modal + Creator modal
     ************************************************************/
    function closeModal(){
      $("#modalRoot").innerHTML = "";
      document.body.style.overflow = "";
    }

    function openBuyModal(product){
      const buyUrl = product.buyUrl || "";
      const urlLooksSet = buyUrl.startsWith("http");

      const html = `
        <div class="overlay" role="dialog" aria-modal="true" id="overlay">
          <div class="modal" role="document">
            <div class="modalTop">
              <div>
                <div class="modalTitle">${escapeHtml(product.title)}</div>
                <div class="modalSub">${escapeHtml(product.style)} • ${escapeHtml(product.level)} • ${product.durationMin} min</div>
              </div>
              <button class="x" id="closeX" aria-label="Close">✕</button>
            </div>

            <div class="modalBody">
              <div class="previewArt">
                <div class="previewGlow"></div>
                <div class="previewText">
                  <div class="pt1">TRAILER PREVIEW</div>
                  <div class="pt2">Swap this embed with your real teaser (YouTube/Vimeo). Keep it 10–20 seconds for conversion.</div>
                </div>
              </div>

              <div class="embedWrap">
                <iframe
                  width="100%" height="315"
                  src="${escapeHtml(product.previewEmbed)}"
                  title="Preview"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowfullscreen
                ></iframe>
              </div>

              <div class="embedNote">
                Monetization note: On a static GitHub site, the Buy button should link to Stripe Payment Links (or Gumroad/Payhip).
              </div>
            </div>

            <div class="modalActions">
              <button class="btn" id="buyBtn">Buy for ${money(product.price)}</button>
              <button class="btn ghost2" id="notNow">Not now</button>
            </div>

            <div class="modalFine">
              For secure access control (recommended): move delivery to Gumroad/Payhip, or upgrade Phase 2 with a backend + Mux.
            </div>
          </div>
        </div>
      `;
      $("#modalRoot").innerHTML = html;
      document.body.style.overflow = "hidden";

      $("#overlay").addEventListener("mousedown", (e)=>{ if (e.target.id === "overlay") closeModal(); });
      $("#closeX").addEventListener("click", closeModal);
      $("#notNow").addEventListener("click", closeModal);

      $("#buyBtn").addEventListener("click", ()=>{
        if (!urlLooksSet){
          showToast("Set your checkout link", "Replace product.buyUrl with your Stripe Payment Link (https://buy.stripe.com/...) or Gumroad/Payhip product link.");
          return;
        }

        // IMPORTANT: For best UX, set your Stripe Payment Link success URL to:
        //   https://YOURNAME.github.io/YOURREPO/success.html?item=PRODUCT_ID
        // If Stripe forces ?session_id=... you can still show the item with a dedicated success page per product, or a generic success page.
        window.location.href = buyUrl;
      });
    }

    function openCreatorModal(){
      const html = `
        <div class="overlay" role="dialog" aria-modal="true" id="overlay">
          <div class="modal" role="document">
            <div class="modalTop">
              <div>
                <div class="modalTitle">Creator Application</div>
                <div class="modalSub">Curated marketplace — mastery only.</div>
              </div>
              <button class="x" id="closeX" aria-label="Close">✕</button>
            </div>

            <div class="modalBody">
              <div class="previewArt" style="height: 160px;">
                <div class="previewGlow"></div>
                <div class="previewText">
                  <div class="pt1">TEACH • SELL • BUILD LEGACY</div>
                  <div class="pt2">MVP uses Formspree to collect applications (static-site friendly).</div>
                </div>
              </div>

              <form class="form" id="creatorForm" method="POST">
                <div class="fRow">
                  <label class="fLabel">Stage name</label>
                  <input class="fInput" name="stage_name" placeholder="e.g., Nova Grooves" required />
                </div>
                <div class="fRow">
                  <label class="fLabel">Primary style</label>
                  <input class="fInput" name="primary_style" placeholder="Hip-Hop, Afro, Contemporary..." required />
                </div>
                <div class="fRow">
                  <label class="fLabel">Portfolio link</label>
                  <input class="fInput" name="portfolio" placeholder="Instagram / YouTube / Website" required />
                </div>
                <div class="fRow">
                  <label class="fLabel">What would you teach?</label>
                  <textarea class="fArea" name="pitch" placeholder="Tell us your specialty and what your drop would cover." required></textarea>
                </div>
              </form>
            </div>

            <div class="modalActions">
              <button class="btn" id="submitCreator">Submit application</button>
              <button class="btn ghost2" id="cancelCreator">Cancel</button>
            </div>

            <div class="modalFine">
              Phase 2: approvals, creator dashboards, payouts (Stripe Connect), and content delivery upgrades.
            </div>
          </div>
        </div>
      `;
      $("#modalRoot").innerHTML = html;
      document.body.style.overflow = "hidden";

      $("#overlay").addEventListener("mousedown", (e)=>{ if (e.target.id === "overlay") closeModal(); });
      $("#closeX").addEventListener("click", closeModal);
      $("#cancelCreator").addEventListener("click", closeModal);

      const form = $("#creatorForm");
      form.action = CREATOR_FORM_ACTION;

      $("#submitCreator").addEventListener("click", async ()=>{
        if (!CREATOR_FORM_ACTION.startsWith("http")){
          showToast("Connect your creator form", "Set CREATOR_FORM_ACTION to your Formspree endpoint (https://formspree.io/f/xxxxxx).");
          return;
        }

        // Submit via fetch to keep the UX smooth
        const fd = new FormData(form);
        try{
          const res = await fetch(form.action, { method:"POST", body: fd, headers: { "Accept": "application/json" } });
          if (res.ok){
            closeModal();
            showToast("Application sent", "You’ll review creators manually in MVP. Phase 2 automates onboarding and payouts.");
          }else{
            showToast("Submission failed", "Check your Formspree endpoint or try again.");
          }
        }catch{
          showToast("Submission failed", "Network issue. Try again.");
        }
      });
    }

    $("#applyBtn").addEventListener("click", openCreatorModal);
    $("#applyBtn2").addEventListener("click", openCreatorModal);
    $("#teachBtn").addEventListener("click", openCreatorModal);

    /************************************************************
     * Time/Vibe/Intensity controls
     ************************************************************/
    let timeMode = "Night";
    let vibe = "Smooth";
    let intensity = parseFloat($("#intensity").value);

    function setTime(mode){
      timeMode = mode;
      $("#page").classList.toggle("matinee", timeMode === "Matinée");
      $("#timeMatinee").classList.toggle("on", timeMode === "Matinée");
      $("#timeNight").classList.toggle("on", timeMode === "Night");
    }
    $("#timeMatinee").addEventListener("click", ()=>setTime("Matinée"));
    $("#timeNight").addEventListener("click", ()=>setTime("Night"));

    $$(".segBtn[data-vibe]").forEach(b=>{
      b.addEventListener("click", ()=>{
        vibe = b.getAttribute("data-vibe");
        $$(".segBtn[data-vibe]").forEach(x=>x.classList.remove("on"));
        b.classList.add("on");
        $("#vibeChip").textContent = vibe + " Mode";
      });
    });

    $("#intensity").addEventListener("input", (e)=>{
      intensity = parseFloat(e.target.value);
    });

    /************************************************************
     * Cursor grid coordinates (subtle “attention retention”)
     ************************************************************/
    const heroSurface = $("#heroSurface");
    const coordsEl = $("#coords");
    const gridSize = 42;
    const cursor = {x:0,y:0,gx:0,gy:0};

    heroSurface.addEventListener("mousemove", (e)=>{
      const r = heroSurface.getBoundingClientRect();
      cursor.x = clamp(e.clientX - r.left, 0, r.width);
      cursor.y = clamp(e.clientY - r.top, 0, r.height);
      cursor.gx = Math.floor(cursor.x / gridSize);
      cursor.gy = Math.floor(cursor.y / gridSize);
      coordsEl.textContent = `Grid: ${cursor.gx},${cursor.gy}`;
    }, {passive:true});

    /************************************************************
     * Canvas “Cypher Theatre” (parallax glow + particles + spotlight)
     ************************************************************/
    const canvas = $("#theatre");
    const ctx = canvas.getContext("2d", {alpha:true});

    const particles = [];
    function rand(a,b){ return a + Math.random()*(b-a); }

    function resize(){
      const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      const w = canvas.clientWidth || window.innerWidth;
      const h = canvas.clientHeight || 580;
      canvas.width = Math.floor(w * dpr);
      canvas.height = Math.floor(h * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    window.addEventListener("resize", resize);
    resize();

    function seed(){
      particles.length = 0;
      const w = canvas.clientWidth || window.innerWidth;
      const h = canvas.clientHeight || 580;
      for (let i=0; i<140; i++){
        particles.push({
          x: Math.random()*w,
          y: Math.random()*h,
          vx: rand(-0.25,0.25),
          vy: rand(-0.18,0.18),
          r: rand(1.3,4.1),
          a: rand(0.28,0.75),
          hue: rand(42, 68)
        });
      }
    }
    seed();

    function vibeParams(){
      if (vibe === "Smooth") return { grain: 0.18, sparks: 0.55, drift: 0.35 };
      if (vibe === "Raw") return { grain: 0.28, sparks: 0.85, drift: 0.55 };
      return { grain: 0.22, sparks: 1.00, drift: 0.75 };
    }

    let t0 = performance.now();
    function frame(t){
      const dt = Math.min(0.032, (t - t0)/1000);
      t0 = t;

      const w = canvas.clientWidth || window.innerWidth;
      const h = canvas.clientHeight || 580;
      ctx.clearRect(0,0,w,h);

      const isNight = (timeMode === "Night");
      const baseAlpha = isNight ? 0.85 : 0.55;

      // Soft aurora (parallax)
      const grd = ctx.createRadialGradient(
        w*0.2 + cursor.x*0.06,
        h*0.2 + cursor.y*0.06,
        40,
        w*0.55,
        h*0.45,
        w*0.9
      );
      grd.addColorStop(0, `rgba(215,184,90,${0.16*baseAlpha})`);
      grd.addColorStop(0.45, `rgba(168,85,247,${0.10*baseAlpha})`);
      grd.addColorStop(1, `rgba(0,0,0,0)`);
      ctx.fillStyle = grd;
      ctx.fillRect(0,0,w,h);

      // Cypher grid
      ctx.save();
      ctx.globalAlpha = isNight ? 0.12 : 0.08;
      ctx.strokeStyle = "rgba(215,184,90,0.75)";
      ctx.lineWidth = 1;

      for (let x=0; x<=w; x+=gridSize){
        ctx.beginPath();
        ctx.moveTo(x + cursor.x*0.02, 0);
        ctx.lineTo(x + cursor.x*0.02, h);
        ctx.stroke();
      }
      for (let y=0; y<=h; y+=gridSize){
        ctx.beginPath();
        ctx.moveTo(0, y + cursor.y*0.02);
        ctx.lineTo(w, y + cursor.y*0.02);
        ctx.stroke();
      }
      ctx.restore();

      // Spotlight sweep
      const sweepX = (t/1000) % 6;
      const sx = (sweepX/6) * w;
      const spotlight = ctx.createLinearGradient(sx-260,0, sx+260,0);
      spotlight.addColorStop(0, "rgba(0,0,0,0)");
      spotlight.addColorStop(0.5, `rgba(245,211,107,${0.12 + intensity*0.10})`);
      spotlight.addColorStop(1, "rgba(0,0,0,0)");
      ctx.fillStyle = spotlight;
      ctx.fillRect(0,0,w,h);

      // Particles (gold dust)
      const vp = vibeParams();
      const drift = (0.25 + vp.drift) * (0.55 + intensity);
      const sparks = (0.65 + vp.sparks) * (0.65 + intensity);

      for (const p of particles){
        const cx = cursor.x / w - 0.5;
        const cy = cursor.y / h - 0.5;

        p.vx += cx * 0.035 * sparks * dt;
        p.vy += cy * 0.025 * sparks * dt;

        p.x += p.vx * (1 + drift);
        p.y += p.vy * (1 + drift);

        if (p.x < -20) p.x = w+20;
        if (p.x > w+20) p.x = -20;
        if (p.y < -20) p.y = h+20;
        if (p.y > h+20) p.y = -20;

        const glow = ctx.createRadialGradient(p.x,p.y,0, p.x,p.y, p.r*6);
        glow.addColorStop(0, `hsla(${p.hue}, 90%, 60%, ${p.a})`);
        glow.addColorStop(1, "rgba(0,0,0,0)");
        ctx.fillStyle = glow;
        ctx.beginPath();
        ctx.arc(p.x,p.y, p.r*(0.9 + intensity*0.6), 0, Math.PI*2);
        ctx.fill();
      }

      // Vignette
      const vg = ctx.createRadialGradient(w/2,h/2, Math.min(w,h)*0.15, w/2,h/2, Math.max(w,h)*0.7);
      vg.addColorStop(0, "rgba(0,0,0,0)");
      vg.addColorStop(1, isNight ? "rgba(0,0,0,0.72)" : "rgba(0,0,0,0.52)");
      ctx.fillStyle = vg;
      ctx.fillRect(0,0,w,h);

      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);

    /************************************************************
     * Success query hint
     ************************************************************/
    // If you set Stripe to return to: index.html?success=1 then this will show a toast.
    const params = new URLSearchParams(location.search);
    if (params.get("success") === "1"){
      showToast("Payment complete", "If you use a static site, route delivery via Gumroad/Payhip or email confirmation. Phase 2 adds secure access.");
    }
    if (params.get("canceled") === "1"){
      showToast("Checkout canceled", "No charge was made. You can re-open a preview and purchase anytime.");
    }
  </script>
</body>
</html>
